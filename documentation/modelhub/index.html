<!doctype html><html lang=en-us><head><meta name=theme content="Syna"><meta name=theme-version content="v0.17.2"><meta name=theme-url content="https://syna.okkur.org"><meta name=theme-description content="Highly customizable open source theme for Hugo based static websites"><meta name=theme-author content="Okkur Labs"><meta name=theme-author-url content="https://about.okkur.org"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=google content="notranslate"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=description content="The EMF Cloud Model Hub is a central model management component that coordinates multiple clients, such as different editors, in their interaction and manipulation with models. The Model Hub not only provides a generic API to access models, but is extensible with respect to different modeling languages. Below we cover not only how clients can access models but also how new modeling languages can be registered.
Interacting with models An application may contain several model hubs, each associated to its own &ldquo;context&rdquo;."><meta property="og:title" content="Model Hub"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://www.eclipse.dev/emfcloud/documentation/modelhub/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Model Hub &amp;middot; EMF Cloud"><meta name=twitter:description content="The EMF Cloud Model Hub is a central model management component that coordinates multiple clients, such as different editors, in their interaction and manipulation with models. The Model Hub not only provides a generic API to access models, but is extensible with respect to different modeling languages. Below we cover not only how clients can access models but also how new modeling languages can be registered.
Interacting with models An application may contain several model hubs, each associated to its own &ldquo;context&rdquo;."><meta name=twitter:url content="https://www.eclipse.dev/emfcloud/documentation/modelhub/"><meta property="og:image" content><meta name=twitter:image content><meta name=author content="Eclipse Foundation"><meta name=generator content="Hugo 0.78.1"><title>Model Hub &#183; EMF Cloud</title><style>.mx-0{margin-left:0!important;margin-right:0!important}@-ms-viewport{width: device-width; }html{box-sizing:border-box;-ms-overflow-style:scrollbar}*,*::before,*::after{box-sizing:inherit}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;max-width:540px;max-width:720px;max-width:960px;max-width:1140px}.container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.no-gutters{margin-right:0;margin-left:0}.no-gutters>.col,.no-gutters>[class*=col-]{padding-right:0;padding-left:0}.col-1,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-10,.col-11,.col-12,.col,.col-auto{position:relative;width:100%;min-height:1px;padding-right:15px;padding-left:15px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-auto{flex:0 0 auto;width:auto;max-width:none}.col-1{flex:0 0 8.33333%;max-width:8.33333%}.col-2{flex:0 0 16.66667%;max-width:16.66667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.33333%;max-width:33.33333%}.col-5{flex:0 0 41.66667%;max-width:41.66667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.33333%;max-width:58.33333%}.col-8{flex:0 0 66.66667%;max-width:66.66667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.33333%;max-width:83.33333%}.col-11{flex:0 0 91.66667%;max-width:91.66667%}.col-12{flex:0 0 100%;max-width:100%}.order-first{order:-1}.order-last{order:13}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}.offset-1{margin-left:8.33333%}.offset-2{margin-left:16.66667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333%}.offset-5{margin-left:41.66667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333%}.offset-8{margin-left:66.66667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333%}.offset-11{margin-left:91.66667%}.d-none{display:none!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}@media print{.d-print-none{display:none!important}.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:flex!important}.d-print-inline-flex{display:inline-flex!important}}.flex-row{flex-direction:row!important}.flex-column{flex-direction:column!important}.flex-row-reverse{flex-direction:row-reverse!important}.flex-column-reverse{flex-direction:column-reverse!important}.flex-wrap{flex-wrap:wrap!important}.flex-nowrap{flex-wrap:nowrap!important}.flex-wrap-reverse{flex-wrap:wrap-reverse!important}.flex-fill{flex:1 1 auto!important}.flex-grow-0{flex-grow:0!important}.flex-grow-1{flex-grow:1!important}.flex-shrink-0{flex-shrink:0!important}.flex-shrink-1{flex-shrink:1!important}.justify-content-start{justify-content:flex-start!important}.justify-content-end{justify-content:flex-end!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}.justify-content-around{justify-content:space-around!important}.align-items-start{align-items:flex-start!important}.align-items-end{align-items:flex-end!important}.align-items-center{align-items:center!important}.align-items-baseline{align-items:baseline!important}.align-items-stretch{align-items:stretch!important}.align-content-start{align-content:flex-start!important}.align-content-end{align-content:flex-end!important}.align-content-center{align-content:center!important}.align-content-between{align-content:space-between!important}.align-content-around{align-content:space-around!important}.align-content-stretch{align-content:stretch!important}.align-self-auto{align-self:auto!important}.align-self-start{align-self:flex-start!important}.align-self-end{align-self:flex-end!important}.align-self-center{align-self:center!important}.align-self-baseline{align-self:baseline!important}.align-self-stretch{align-self:stretch!important}</style><link href=/emfcloud/style.min.3ebbdeb85cb631a42d571aa14e34188cd928e4e5d2c714de80309f51001f3a94.css rel=stylesheet><link rel="shortcut icon" type=image/x-icon href=favicon.ico><link rel=icon sizes="16x16 32x32" type=image/x-icon href=/emfcloud/favicon.ico><link rel=icon href=/emfcloud/favicon.png><link rel=apple-touch-icon-precomposed href=/emfcloud/favicon.png><script>window.syna={};</script><script src=/emfcloud/scripts/syna-head.min.0757f18970a0a32d5acac5a2accc5fe82f787821866c545d9ed17ca765f291a3.js></script></head><body class=bg-secondary><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2375e895e9be4dc1a3672df5c8b9d320"}'></script><nav class="overlay fragment navbar navbar-expand-lg py-2 scroll-spy bg-light navbar-light" id=nav role=navigation><div class=container><a class="navbar-brand py-0" href=/emfcloud/#><img src=/emfcloud/images/logo.png height=35 class="d-inline-block align-top" alt="EMF Cloud"></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse justify-content-end collapse show" id=navbarCollapse><ul class=navbar-nav><li class=nav-item><a href=/emfcloud class=nav-link>Home</a></li><li class=nav-item><a href=/emfcloud/support class=nav-link>Support</a></li><li class=nav-item><a href=/emfcloud/documentation class=nav-link>Documentation</a></li><li class=nav-item><a href=/emfcloud/contact class=nav-link>Contact</a></li><li class=nav-item><a href=https://github.com/eclipse-emfcloud/emfcloud class=nav-link>GitHub</a></li></ul></div></div></nav><div class="scroll-to-top bg-primary has-font-icon" title="Back to top"><i class="fas fa-angle-up"></i><span class=sr-only>Back to top</span></div><section id=content class="fragment content-fragment"><div class="container-fluid bg-light overlay"><div class="container py-5 overlay"><div class=row><div class="content-sidebar col-md-3 pb-4 px-md-0 order-0"><div class="sticky-top pt-3"><div class="content-sidebar-body col-12 px-0 text-left text-body"><section id=sidebar class=fragment><div class="container p-0"><div class="row mx-0 text-body"><article id=list-page-overview class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-overview .collapse" data-add-collapse="#list-page-overview .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/overview/>Overview</a></h5></div></div><div class=collapse></div></article><article id=list-page-gettingstarted class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-gettingstarted .collapse" data-add-collapse="#list-page-gettingstarted .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/gettingstarted/>Getting Started</a></h5></div></div><div class=collapse></div></article><article id=list-page-coffeeeditorng class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-coffeeeditorng .collapse" data-add-collapse="#list-page-coffeeeditorng .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/coffeeeditorng/>Coffee Editor NG</a></h5></div></div><div class=collapse></div></article><article id=list-page-modelhub class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-modelhub .collapse" data-add-collapse="#list-page-modelhub .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0 active-page"><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/>Model Hub</a></h5></div></div><div class="collapse show"><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/#interacting-with-models>Interacting with models</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/#contributing-modeling-languages>Contributing modeling languages</a></li></ul></li></ul></nav></div></div></section></div></article><article id=list-page-modelinglanguage class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-modelinglanguage .collapse" data-add-collapse="#list-page-modelinglanguage .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/modelinglanguage/>Language Definition</a></h5></div></div><div class=collapse></div></article><article id=list-page-langium class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-langium .collapse" data-add-collapse="#list-page-langium .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/langium/>Langium Integration</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/langium/#model-persistence>Model Persistence</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/langium/#model-validation>Model Validation</a></li></ul></nav></div></div></section></div></article><article id=list-page-editingdomain class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-editingdomain .collapse" data-add-collapse="#list-page-editingdomain .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/>Editing Domain</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#general-principles>General principles</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#model-service-implementation>Model Service implementation</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#command-stack-ids>Command Stack IDs</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#model-hub-context>Model Hub Context</a></li></ul></nav></div></div></section></div></article><article id=list-page-treeeditor class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-treeeditor .collapse" data-add-collapse="#list-page-treeeditor .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/>Tree-based Editors</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/#overview>Overview</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/#integrating-modelhub>Integrating ModelHub</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/#coffee-editor-ng-example>Coffee Editor NG Example</a></li></ul></nav></div></div></section></div></article><article id=list-page-diagrameditor class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-diagrameditor .collapse" data-add-collapse="#list-page-diagrameditor .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/>Diagram Editors</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#introduction>Introduction</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#modelhub-integration>ModelHub Integration</a><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#sourcemodelstorage>SourceModelStorage</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#gmodelfactory>GModelFactory</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#model-operations>Model Operations</a></li></ul></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#coffee-editor-ng-example>Coffee Editor NG Example</a><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#workflowmodelstorage>WorkflowModelStorage</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#coffeegmodelfactory>CoffeeGModelFactory</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#model-operations-via-the-coffeemodelservice>Model Operations via the CoffeeModelService</a></li></ul></li></ul></nav></div></div></section></div></article><article id=list-page-emf class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-emf .collapse" data-add-collapse="#list-page-emf .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/emf/>EMF Support</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/emf/#emf-model-server>EMF Model Server</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/emf/#emf-coffee-editor>EMF Coffee Editor</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/emf/#getting-started>Getting Started</a></li></ul></nav></div></div></section></div></article><article id=list-page-additionals class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-additionals .collapse" data-add-collapse="#list-page-additionals .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/additionals/>More Articles & Videos</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/additionals/#articles>Articles</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/additionals/#videos>Videos</a></li></ul></nav></div></div></section></div></article></div></div></section></div></div></div><article class=col-md-9><div class="title-container row mx-0"><div class="title col px-0 text-center text-body"><h2>Model Hub</h2></div></div><div class="content-body col-12 content px-0 text-body"><section id=content-toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/#interacting-with-models>Interacting with models</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/#contributing-modeling-languages>Contributing modeling languages</a></li></ul></li></ul></nav></div></div></section><p>The EMF Cloud Model Hub is a central model management component that coordinates multiple clients, such as different editors, in their interaction and manipulation with models.
The Model Hub not only provides a generic API to access models, but is extensible with respect to different modeling languages.
Below we cover not only how clients can access models but also how new modeling languages can be registered.</p><h3 id=interacting-with-models>Interacting with models</h3><p>An application may contain several model hubs, each associated to its own &ldquo;context&rdquo;. The context is a unique string identifier. If an application requires a single model hub context, it may use a constant string; but it is also possible to use more dynamic values that take the current editor into account (e.g. using a folder path, or an application ID, or any value relevant to the application being developped).</p><p>Each instance of model hub comes with its own set of contributions, services, models and states.</p><p>To access the model hub for a given context, we use the ModelHubProvider, which is registered as a Theia Extension:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ModelHubProvider</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@eclipse-emfcloud/model-service-theia/lib/node/model-hub-provider&#39;</span>;
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ModelHub</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@eclipse-emfcloud/model-service&#39;</span>;

<span style=color:#66d9ef>@injectable</span>()
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ModelHubExample</span> {
  <span style=color:#66d9ef>@inject</span>(<span style=color:#a6e22e>ModelHubProvider</span>)
  <span style=color:#a6e22e>modelHubProvider</span>: <span style=color:#66d9ef>ModelHubProvider</span>

  <span style=color:#a6e22e>modelHub</span>: <span style=color:#66d9ef>ModelHub</span>;

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>initializeModelHub() {</span>
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelHub</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>modelHubProvider</span>(<span style=color:#e6db74>&#39;my-application-context&#39;</span>);
  }
}
</code></pre></div><h4 id=loading-and-saving-models>Loading and saving models</h4><p>Loading and saving models can be achieved by calling the corresponding methods on your model hub instance, assuming contributions have been registered that can handled the requested model IDs. Model IDs are string identifiers that represent a model. They are typically URIs, but can be any arbitrary strings, as long as a Persistence Contribution is able to handle them (See <a href=#persistence>Persistence section</a> below).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelId</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer3000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>model</span>: <span style=color:#66d9ef>object</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>getModel</span>(<span style=color:#a6e22e>modelId</span>);
</code></pre></div><p>If you&rsquo;re certain about the type of your model, you can also directly cast it to the necessary type:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelId</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer3000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>model</span>: <span style=color:#66d9ef>CoffeeModelRoot</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>getModel</span>&lt;<span style=color:#f92672>CoffeeModelRoot</span>&gt;(<span style=color:#a6e22e>modelId</span>);
</code></pre></div><p><strong>Note:</strong> If the model is already loaded, the in-memory instance will be immediately returned. Otherwise, the model hub will look for a Persistence Contribution that can handle the requested <code>modelId</code>, and load it before returning it. Since loading may require asynchronous operations, the <code>getModel()</code> method is itself asynchronous.</p><p>After applying some changes, you can save your model. For editing the model, the ModelHub uses Commands executed on a CommandStack, identified by a CommandStackId. When using a single model, the commandStackId can be the same value as the modelId. However, since Commands may affect multiple models in some cases, you may want to use a different CommandStackId. When saving this CommandStack, all models that have been modified by a Command executed on this CommandStack will be saved.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>// In this example, we use a single model, so we can use the modelId as the commandStackId.
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelId</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer3000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>commandStackId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>modelId</span>;
<span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>save</span>(<span style=color:#a6e22e>commandStackId</span>);
</code></pre></div><p>Alternatively, you can save all modified models on all available Command Stacks:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>save</span>();
</code></pre></div><h4 id=resolving-references>Resolving references</h4><p>If you have cross references in your model, i.e., pointers to other nodes either within the same model or another model in another document, you need to consider how those references should be represented and how they can be resolve to the referenced element.
By default, references are represented as information about a typed and named nodes located to a particular path within a document.
The main reasoning for this representation is that it uniquely identifies an element and can be serialized and sent to clients who can later use that information to resolve the actual element.
However, not all cross references may be resolvable due to changes in the model or the modeling language used.
In such cases, we want to provide as much information as we can to the client by at least giving the text that was used in the model for the reference and a potentially custom error.
Treating reference errors as just another case in reference resolutions allows them to be effectively handled by any type of client, no matter the visual representation.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>NodeInfo</span> {
  <span style=color:#75715e>/** URI to the document containing the referenced element. */</span>
  <span style=color:#a6e22e>$documentUri</span>: <span style=color:#66d9ef>string</span>;
  <span style=color:#75715e>/** Navigation path inside the document */</span>
  <span style=color:#a6e22e>$path</span>: <span style=color:#66d9ef>string</span>;
  <span style=color:#75715e>/** `$type` property value */</span>
  <span style=color:#a6e22e>$type</span>: <span style=color:#66d9ef>string</span>;
  <span style=color:#75715e>/** Name of element */</span>
  <span style=color:#a6e22e>$name</span>: <span style=color:#66d9ef>string</span>;
  <span style=color:#75715e>/** Generic object properties */</span>
  [<span style=color:#a6e22e>x</span>: <span style=color:#66d9ef>string</span>]<span style=color:#f92672>:</span> <span style=color:#66d9ef>unknown</span>;
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ReferenceError</span> {
  <span style=color:#a6e22e>$refText</span>: <span style=color:#66d9ef>string</span>;
  <span style=color:#a6e22e>$error</span>: <span style=color:#66d9ef>string</span>;
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ReferenceInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>NodeReferenceInfo</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>ReferenceError</span>;
</code></pre></div><p>While the ModelHub server flattens the reference information to be serializable, on the client side we often want to interact with the actual element that the reference represents instead of always being aware that there is a reference that we need to resolve.
To ease that more natural use of an object graph on the client side, we provide a utility function that replaces all unresolved references with reference objects that can query the object using a custom resolution mechanism.
In its purest form such a reference object may simply go to the ModelHub server and query the node based on the node info.
In more complex or high performance scenarios a different resolution or caching may be introduced.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Reference</span>&lt;<span style=color:#f92672>T</span>&gt; <span style=color:#f92672>=</span> <span style=color:#a6e22e>Partial</span>&lt;<span style=color:#f92672>NodeReferenceInfo</span>&gt; <span style=color:#f92672>&amp;</span>
  <span style=color:#a6e22e>Partial</span>&lt;<span style=color:#f92672>ReferenceError</span>&gt; <span style=color:#f92672>&amp;</span> {
    <span style=color:#a6e22e>element</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>T</span> <span style=color:#960050;background-color:#1e0010>|</span> <span style=color:#a6e22e>undefined</span>&gt;;
    <span style=color:#a6e22e>error</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>;
  };

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ReferenceFactory</span>&lt;<span style=color:#f92672>T</span>&gt; <span style=color:#f92672>=</span> (<span style=color:#a6e22e>info</span>: <span style=color:#66d9ef>ReferenceInfo</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Reference</span>&lt;<span style=color:#f92672>T</span>&gt;;

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>reviveReferences</span>&lt;<span style=color:#f92672>T</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>object</span>&gt;(<span style=color:#a6e22e>obj</span>: <span style=color:#66d9ef>T</span>, <span style=color:#a6e22e>referenceFactory</span>: <span style=color:#66d9ef>ReferenceFactory</span>&lt;<span style=color:#f92672>T</span>&gt;)<span style=color:#f92672>:</span> <span style=color:#a6e22e>T</span> {
  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>value</span>] <span style=color:#66d9ef>of</span> Object.<span style=color:#a6e22e>entries</span>(<span style=color:#a6e22e>obj</span>)) {
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isReferenceInfo</span>(<span style=color:#a6e22e>value</span>)) {
      (<span style=color:#a6e22e>obj</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>any</span>)[<span style=color:#a6e22e>key</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>referenceFactory</span>(<span style=color:#a6e22e>value</span>);
    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;object&#39;</span>) {
      <span style=color:#a6e22e>reviveReferences</span>(<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>referenceFactory</span>);
    }
  }
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>obj</span>;
}
</code></pre></div><h4 id=changing-models>Changing models</h4><p>For the sake of isolation, the ModelHub doesn&rsquo;t expose methods to directly edit the models. Instead, Model Contributions are expected to register a Model Service, that will be responsible for handling all edition operations on the models it handles. Any application interesting in editing these models can request the corresponding Model Service, then call any of the exposed API methods to perform edit operations.</p><p>Edit Operations take the form of Commands, that are executed on a CommandStack. A Command may change one or several Models, and supports Undo/Redo operations.</p><p>Commands are usually handled directly by the Model Service, so they will not be visible to the client of the Model Service.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CoffeeModelService</span> {
  <span style=color:#a6e22e>getCoffeeModel</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>CoffeeModelRoot</span> <span style=color:#960050;background-color:#1e0010>|</span> <span style=color:#a6e22e>undefined</span>&gt;;

  <span style=color:#a6e22e>unload</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>void</span>&gt;;

  <span style=color:#a6e22e>edit</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>patch</span>: <span style=color:#66d9ef>Operation</span>[])<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>PatchResult</span>&gt;;

  <span style=color:#a6e22e>createNode</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>parent</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Workflow</span>, <span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>CreateNodeArgs</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>PatchResult</span>&gt;;
}

<span style=color:#75715e>/**
</span><span style=color:#75715e> * This constant is used to register the CoffeeModelService and to retrieve
</span><span style=color:#75715e> * it from the ModelHub.
</span><span style=color:#75715e> */</span> 
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>COFFEE_SERVICE_KEY</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;coffeeModelService&#39;</span>;

<span style=color:#75715e>// Access and use the model service
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelService</span>: <span style=color:#66d9ef>CoffeeModelService</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>getModelService</span>&lt;<span style=color:#f92672>CoffeeModelService</span>&gt;(<span style=color:#a6e22e>COFFEE_SERVICE_KEY</span>);
<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>modelService</span>.<span style=color:#a6e22e>createNode</span>(<span style=color:#a6e22e>modelId</span>, <span style=color:#e6db74>&#39;/workflows/0&#39;</span>, { <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;AutomaticTask&#39;</span> });
</code></pre></div><h4 id=validating-models>Validating models</h4><p>Model Contributions may register Validators. These Validators will be invoked whenever the ModelHub is validated:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelId</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer3000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>diagnostic</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>validateModels</span>(<span style=color:#a6e22e>modelId</span>);
</code></pre></div><p>Several models can be validated at the same time:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelId1</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer2000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelId2</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer3000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>diagnostic</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>validateModels</span>(<span style=color:#a6e22e>modelId1</span>, <span style=color:#a6e22e>modelId2</span>);
</code></pre></div><p>Or you can validate all models currently loaded, by omitting the <code>modelIds</code> argument:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>diagnostic</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>validateModels</span>();
</code></pre></div><p><strong>Note:</strong> In the latter case, only models currently <em>loaded</em> will be validated. Since the model hub relies on lazy-loading to identify existing models, it may ignore some models present in your workspace, if they have never been explicitly loaded beforehand.</p><p>The <code>validateModels</code> method will validate all requested models, then return the validation results, in the form of a Diagnostic.</p><p>If you&rsquo;re only interested in the latest known validation results, but don&rsquo;t want to wait for a full validation cycle, you can use <code>getValidationState</code> instead. This method doesn&rsquo;t trigger any validation, but returns the result from the latest validation:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelId</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer3000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentDiagnostic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>getValidationState</span>(<span style=color:#a6e22e>modelId</span>);
</code></pre></div><h3 id=contributing-modeling-languages>Contributing modeling languages</h3><p>The Model Hub can handle several aspects for each Modeling Language:</p><ul><li>Persistence (Save/Load)</li><li>Edition (Via Model Services and Commands)</li><li>Validation</li><li>Triggers</li></ul><p>All of these aspects can be registered using a <code>ModelServiceContribution</code>. The only mandatory aspect is Edition, via a Model Service.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>/**
</span><span style=color:#75715e> * Our Model Service identifier. Used by clients to retrieve our Model Service.
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>COFFEE_SERVICE_KEY</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;coffeeModelService&#39;</span>;

<span style=color:#66d9ef>@injectable</span>()
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CoffeeModelServiceContribution</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>AbstractModelServiceContribution</span> {
  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>modelService</span>: <span style=color:#66d9ef>CoffeeModelService</span>;

  <span style=color:#66d9ef>@postConstruct</span>()
  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>init</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>initialize</span>({
      <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>COFFEE_SERVICE_KEY</span>
    })
  }

  <span style=color:#a6e22e>getModelService</span>&lt;<span style=color:#f92672>S</span>&gt;()<span style=color:#f92672>:</span> <span style=color:#a6e22e>S</span> {
    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelService</span>){
      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelService</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CoffeeModelServiceImpl</span>();
    }
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelService</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>unknown</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>S</span>;
  }
}
</code></pre></div><p>This minimal example lacks critical capabilities, that are required by most applications: persistence, and access to the Model Manager, in order to execute Commands. Here&rsquo;s a more complete and realistic example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>/**
</span><span style=color:#75715e> * Our Model Service identifier. Used by clients to retrieve our Model Service.
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>COFFEE_SERVICE_KEY</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;coffeeModelService&#39;</span>;

<span style=color:#66d9ef>@injectable</span>()
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CoffeeModelServiceContribution</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>AbstractModelServiceContribution</span> {

  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>modelService</span>: <span style=color:#66d9ef>CoffeeLanguageModelService</span>;

  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>@inject</span>(<span style=color:#a6e22e>CoffeeLanguageModelService</span>) <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>languageService</span>: <span style=color:#66d9ef>CoffeeLanguageModelService</span>){
    <span style=color:#75715e>// Empty constructor
</span><span style=color:#75715e></span>  }

  <span style=color:#66d9ef>@postConstruct</span>()
  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>init</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>initialize</span>({
      <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>COFFEE_SERVICE_KEY</span>,
      <span style=color:#a6e22e>persistenceContribution</span>: <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CoffeePersistenceContribution</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>languageService</span>)
    });
  }

  <span style=color:#a6e22e>getModelService</span>&lt;<span style=color:#f92672>S</span>&gt;()<span style=color:#f92672>:</span> <span style=color:#a6e22e>S</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelService</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>unknown</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>S</span>;
  }

  <span style=color:#a6e22e>setModelManager</span>(<span style=color:#a6e22e>modelManager</span>: <span style=color:#66d9ef>ModelManager</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>setModelManager</span>(<span style=color:#a6e22e>modelManager</span>);
    <span style=color:#75715e>// Forward the model manager to our model service, so it can actually
</span><span style=color:#75715e></span>    <span style=color:#75715e>// execute some commands.
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelService</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CoffeeModelServiceImpl</span>(<span style=color:#a6e22e>modelManager</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>languageService</span>);
  }
}

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CoffeePersistenceContribution</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ModelPersistenceContribution</span> {
  
  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>languageService</span>: <span style=color:#66d9ef>CoffeeLanguageModelService</span>) {
    <span style=color:#75715e>// Empty
</span><span style=color:#75715e></span>  }

  <span style=color:#a6e22e>canHandle</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>boolean</span>&gt; {
    <span style=color:#75715e>// This example handles file URIs with the &#39;.coffee&#39; extension
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Promise</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>modelId</span>.<span style=color:#a6e22e>startsWith</span>(<span style=color:#e6db74>&#39;file:/&#39;</span>) 
      <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>modelId</span>.<span style=color:#a6e22e>endsWith</span>(<span style=color:#e6db74>&#39;.coffee&#39;</span>));
  }

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>loadModel</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>object</span>&gt; {
    <span style=color:#75715e>// Load our model from file...
</span><span style=color:#75715e></span>  }

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>saveModel</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>model</span>: <span style=color:#66d9ef>object</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>boolean</span>&gt; {
    <span style=color:#75715e>// Save the new model to file...
</span><span style=color:#75715e></span>  }
}
</code></pre></div><h4 id=persistence>Persistence</h4><p>Persistence is handled by specifying a <code>ModelPersistenceContribution</code> in your <code>ModelServiceContribution</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts>  <span style=color:#66d9ef>@postConstruct</span>()
  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>init</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>initialize</span>({
      <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>COFFEE_SERVICE_KEY</span>,
      <span style=color:#a6e22e>persistenceContribution</span>: <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CoffeePersistenceContribution</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>languageService</span>)
    });
  }
</code></pre></div><p>The Persistence contribution needs to implement three methods: <code>canHandle(modelId)</code> to indicate which models it supports, <code>load(modelId)</code> and <code>save(modelId, model)</code> for the actual persistence.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CoffeePersistenceContribution</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ModelPersistenceContribution</span> {

  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>languageService</span>: <span style=color:#66d9ef>CoffeeLanguageModelService</span>) {
    <span style=color:#75715e>// Empty
</span><span style=color:#75715e></span>  }
  
  <span style=color:#a6e22e>canHandle</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>boolean</span>&gt; {
    <span style=color:#75715e>// This example handles file URIs with the &#39;.coffee&#39; extension
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Promise</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>modelId</span>.<span style=color:#a6e22e>startsWith</span>(<span style=color:#e6db74>&#39;file:/&#39;</span>) 
      <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>modelId</span>.<span style=color:#a6e22e>endsWith</span>(<span style=color:#e6db74>&#39;.coffee&#39;</span>));
  }

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>loadModel</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>object</span>&gt; {
    <span style=color:#75715e>// Load our model from file...
</span><span style=color:#75715e></span>  }

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>saveModel</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>model</span>: <span style=color:#66d9ef>object</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>boolean</span>&gt; {
    <span style=color:#75715e>// Save the new model to file...
</span><span style=color:#75715e></span>  }
}
</code></pre></div><h4 id=cross-references>Cross References</h4><p>As discussion in the <a href=#resolving-references>reference resolution section</a>, cross references that stem from your custom <a href=../modelinglanguage/>Langium-based modeling language</a> need to be serializable so they can be sent to ModelHub clients.
Cross references in Langium are regular objects that may contain cycles.
Breaking those cycles is the main purpose of the <a href=../langium/>AstLanguageModelConverter</a>, a converter between the Langium-based AST model and the client language model.
By default, the ModelHub converter converts the <code>Reference</code> objects from Langium to <code>ReferenceInfo</code> objects that can be serialized and later revived again based on the document location:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DefaultAstLanguageModelConverter</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>AstLanguageModelConverter</span> {
  ...
  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>replacer</span>(<span style=color:#a6e22e>_source</span>: <span style=color:#66d9ef>AstNode</span>, <span style=color:#a6e22e>key</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>unknown</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>unknown</span> {
    ...
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isReference</span>(<span style=color:#a6e22e>value</span>)) {
      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>replaceReference</span>(<span style=color:#a6e22e>value</span>);
    }
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>value</span>;
  }

  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>replaceReference</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>Reference</span>&lt;<span style=color:#f92672>AstNode</span>&gt;)<span style=color:#f92672>:</span> <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>ReferenceInfo</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>$nodeDescription</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>ref</span>
      <span style=color:#f92672>?</span> {
          <span style=color:#a6e22e>$documentUri</span>: <span style=color:#66d9ef>getDocument</span>(<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>ref</span>).<span style=color:#a6e22e>uri</span>.<span style=color:#a6e22e>toString</span>(),
          <span style=color:#a6e22e>$name</span>: <span style=color:#66d9ef>value.$nodeDescription.name</span>,
          <span style=color:#a6e22e>$path</span>: <span style=color:#66d9ef>value.$nodeDescription.path</span>,
          <span style=color:#a6e22e>$type</span>: <span style=color:#66d9ef>value.$nodeDescription.type</span>
        }
      <span style=color:#f92672>:</span> {
          <span style=color:#a6e22e>$refText</span>: <span style=color:#66d9ef>value.$refText</span>,
          <span style=color:#a6e22e>$error</span>: <span style=color:#66d9ef>value.error?.message</span> <span style=color:#f92672>??</span> <span style=color:#e6db74>&#39;Could not resolve reference: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>$refText</span>
        };
  }

  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>reviveNodeReference</span>(<span style=color:#a6e22e>container</span>: <span style=color:#66d9ef>AstNode</span>, <span style=color:#a6e22e>reference</span>: <span style=color:#66d9ef>client.NodeReferenceInfo</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Reference</span> {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>node</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>resolveClientReference</span>(<span style=color:#a6e22e>container</span>, <span style=color:#a6e22e>reference</span>);
    <span style=color:#66d9ef>return</span> {
      <span style=color:#a6e22e>$refText</span>: <span style=color:#66d9ef>reference.$name</span>,
      <span style=color:#a6e22e>$nodeDescription</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>documentUri</span>: <span style=color:#66d9ef>URI.parse</span>(<span style=color:#a6e22e>reference</span>.<span style=color:#a6e22e>$documentUri</span>),
        <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>reference.$name</span>,
        <span style=color:#a6e22e>path</span>: <span style=color:#66d9ef>reference.$path</span>,
        <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>reference</span>.<span style=color:#a6e22e>$type</span>
      },
      <span style=color:#a6e22e>$refNode</span>: <span style=color:#66d9ef>node?.$cstNode</span>
    };
  }

  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>resolveClientReference</span>(<span style=color:#a6e22e>container</span>: <span style=color:#66d9ef>AstNode</span>, <span style=color:#a6e22e>reference</span>: <span style=color:#66d9ef>client.NodeReferenceInfo</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>AstNode</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span> {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>uri</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>URI</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>reference</span>.<span style=color:#a6e22e>$documentUri</span>);
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>root</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>uri</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>documents</span>.<span style=color:#a6e22e>getOrCreateDocument</span>(<span style=color:#a6e22e>uri</span>).<span style=color:#a6e22e>parseResult.value</span> : <span style=color:#66d9ef>container</span>;
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getAstNodeLocator</span>(<span style=color:#a6e22e>root</span>.<span style=color:#a6e22e>$document</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>uri</span>)<span style=color:#f92672>?</span>.<span style=color:#a6e22e>getAstNode</span>(<span style=color:#a6e22e>root</span>, <span style=color:#a6e22e>reference</span>.<span style=color:#a6e22e>$path</span>);
  }
}
</code></pre></div><p>As with all other services, the behavior of this conversion can be adapted by extending or completely replacing the implementation and re-binding it in the respective module.</p><h4 id=editing-domain>Editing Domain</h4><p>TODO</p><h4 id=validators>Validators</h4><p>A ModelServiceContribution can register a ValidationContribution, which will return a list of Validators. Validators will be invoked for all models (including the ones not actually handled by the Model Service Contribution), so they need to implement some kind of Type Guards to decide if they should actually try to validate a model or ignore it.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts>  <span style=color:#66d9ef>@postConstruct</span>()
  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>init</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>initialize</span>({
      <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>COFFEE_SERVICE_KEY</span>,
      <span style=color:#a6e22e>validationContribution</span>: <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CoffeeValidationContribution</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>languageService</span>)
    });
  }
</code></pre></div><p>A ValidationContribution simply returns a list of Validators:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CoffeeValidationContribution</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ModelValidationContribution</span> {

  <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>languageService</span>: <span style=color:#66d9ef>CoffeeLanguageModelService</span>){
    <span style=color:#75715e>// Empty
</span><span style=color:#75715e></span>  }

  <span style=color:#a6e22e>getValidators</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>Validator</span>[] {
    <span style=color:#66d9ef>return</span> [
      <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>WorkflowValidator</span>(),
      <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TaskValidator</span>()
    ];
  }
}

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WorkflowValidator</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>Validator</span>&lt;<span style=color:#f92672>string</span>&gt; {
  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>validate</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>model</span>: <span style=color:#66d9ef>object</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>Diagnostic</span>&gt; {
    <span style=color:#75715e>// Start with a model typeguard, as all validators will be invoked
</span><span style=color:#75715e></span>    <span style=color:#75715e>// for all models.
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isWorkflow</span>(<span style=color:#a6e22e>modelId</span>, <span style=color:#a6e22e>model</span>)){
      <span style=color:#75715e>// Check that model is a well-formed Workflow...
</span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> {
      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ok</span>();
    }
  }
}

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TaskValidator</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>Validator</span>&lt;<span style=color:#f92672>string</span>&gt; {
  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>validate</span>(<span style=color:#a6e22e>modelId</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>model</span>: <span style=color:#66d9ef>object</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>Diagnostic</span>&gt; {
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isWorkflow</span>(<span style=color:#a6e22e>modelId</span>, <span style=color:#a6e22e>model</span>)){
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tasks</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>nodes</span>.<span style=color:#a6e22e>filter</span>(
        <span style=color:#a6e22e>node</span> <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>node</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;AutomaticTask&#39;</span> 
        <span style=color:#f92672>||</span> <span style=color:#a6e22e>node</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;ManualTask&#39;</span>);
      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>task</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>tasks</span>){
        <span style=color:#75715e>// Check that each Task is well-formed...
</span><span style=color:#75715e></span>      }
    } <span style=color:#66d9ef>else</span> {
      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ok</span>();
    }
  }
}
</code></pre></div><h4 id=custom-apis>Custom APIs</h4><p>Model Service Contributions may (and typically should) expose a public Model Service API, that can be used to interact with the models it provides. A Model Service is identified by a Key, and defined by an Interface. The implementation is then provided by the Model Service Contribution.</p><p>Model Service definition, exposed to all clients that may require it:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#75715e>/**
</span><span style=color:#75715e> *  Our custom language-specific Model Service API
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CoffeeModelService</span> {
  <span style=color:#a6e22e>getCoffeeModel</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>CoffeeModelRoot</span> <span style=color:#960050;background-color:#1e0010>|</span> <span style=color:#a6e22e>undefined</span>&gt;;

  <span style=color:#a6e22e>unload</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>void</span>&gt;;

  <span style=color:#a6e22e>edit</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>patch</span>: <span style=color:#66d9ef>Operation</span>[])<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>PatchResult</span>&gt;;

  <span style=color:#a6e22e>createNode</span>(<span style=color:#a6e22e>modelUri</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>parent</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Workflow</span>, <span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>CreateNodeArgs</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>PatchResult</span>&gt;;
}

<span style=color:#75715e>/**
</span><span style=color:#75715e> * This constant is used to register the CoffeeModelService and to retrieve
</span><span style=color:#75715e> * it from the ModelHub.
</span><span style=color:#75715e> */</span> 
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>COFFEE_SERVICE_KEY</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;coffeeModelService&#39;</span>;
</code></pre></div><p>Model Service contribution, used to register our language (minimal example):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>@injectable</span>()
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CoffeeModelServiceContribution</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>AbstractModelServiceContribution</span> {
  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>modelService</span>: <span style=color:#66d9ef>CoffeeModelService</span>;

  <span style=color:#66d9ef>@postConstruct</span>()
  <span style=color:#66d9ef>protected</span> <span style=color:#a6e22e>init</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>initialize</span>({
      <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>COFFEE_SERVICE_KEY</span>
    })
  }

  <span style=color:#a6e22e>getModelService</span>&lt;<span style=color:#f92672>S</span>&gt;()<span style=color:#f92672>:</span> <span style=color:#a6e22e>S</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelService</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>unknown</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>S</span>;
  }

  <span style=color:#a6e22e>setModelManager</span>(<span style=color:#a6e22e>modelManager</span>: <span style=color:#66d9ef>ModelManager</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
    <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>setModelManager</span>(<span style=color:#a6e22e>modelManager</span>);
    <span style=color:#75715e>// Forward the model manager to our model service, so it can actually
</span><span style=color:#75715e></span>    <span style=color:#75715e>// execute some commands.
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelService</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CoffeeModelServiceImpl</span>(<span style=color:#a6e22e>modelManager</span>);
  }
}
</code></pre></div><p>The API can then be retrieved and used by any model hub client:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>coffeeModelService</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>getModelService</span>&lt;<span style=color:#f92672>CoffeeModelService</span>&gt;(<span style=color:#a6e22e>COFFEE_SERVICE_KEY</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>modelUri</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;file:///coffee-editor/examples/workspace/superbrewer3000.coffee&#39;</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>coffeeModel</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>coffeeModelService</span>.<span style=color:#a6e22e>getModel</span>(<span style=color:#a6e22e>modelUri</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>createArgs</span> <span style=color:#f92672>=</span> {
  <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;AutomaticTask&#39;</span>,
  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;new task&#39;</span>
}
<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>coffeeModelService</span>.<span style=color:#a6e22e>createNode</span>(<span style=color:#a6e22e>modelUri</span>, <span style=color:#a6e22e>coffeeModel</span>.<span style=color:#a6e22e>workflows</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>createArgs</span>);
</code></pre></div></div></article></div></div></div></section><section id=footer class=fragment><div class="container-fluid bg-light"><div class="container py-5"><div class=row><div class="col-md m-2 text-body"><h4></h4><a href=#><img src=/emfcloud/images/logo.png class="img-fluid w-50" alt="EMF Cloud"></a><div class="row justify-content-left ml-0"><span class="fa-stack fa-2x mt-3 mr-1" title=twitter><a href=https://twitter.com/emfcloud class=ignore-color-change><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-twitter fa-stack-1x fa-fw text-light"></i><span class=sr-only>twitter</span></a></span>
<span class="fa-stack fa-2x mt-3 mr-1" title=github><a href=https://github.com/eclipse-emfcloud/emfcloud class=ignore-color-change><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-github fa-stack-1x fa-fw text-light"></i><span class=sr-only>github</span></a></span>
<span class="fa-stack fa-2x mt-3 mr-1" title=github-discussions><a href=https://github.com/eclipse-emfcloud/emfcloud/discussions class=ignore-color-change><i class="fas fa-circle fa-stack-2x"></i><i class="far fa-comments fa-stack-1x fa-fw text-light"></i><span class=sr-only>github-discussions</span></a></span></div></div><div class="col-md m-2 text-body"><h4>Related Projects</h4><ul class="nav flex-column"><li class=nav-item><a class="nav-link p-0 display-5" href=https://eclipse.dev/glsp>Eclipse GLSP</a></li><li class=nav-item><a class="nav-link p-0 display-5" href=https://jsonforms.io>JSON Forms</a></li><li class=nav-item><a class="nav-link p-0 display-5" href=https://eclipsesource.com/technology/eclipse-theia>Eclipse Theia IDE</a></li><li class=nav-item><a class="nav-link p-0 display-5" href=https://eclipse.dev/che>Eclipse Che</a></li></ul></div><div class="col-md m-2 text-body"><div><h4 id=emf-cloud>EMF Cloud</h4><p>EMF Cloud is a project hosted at the <a href=https://eclipse.org>Eclipse Foundation</a>, lead by <a href=https://projects.eclipse.org/projects/ecd.emfcloud/who>Eugen, Philip and Maximilian</a>, organized within the <a href=https://projects.eclipse.org/projects/ecd>Eclipse Cloud Development</a> project.</p><p>Gefrdert durch: <img src=/emfcloud/images/BMBF_Logo.svg alt="BMBG Logo"></p></div></div></div></div></div></section><footer class="overlay fragment container-fluid bg-secondary" id=copyright><div class=container><div class="row py-3"><div class=col-md><div class="row mx-0 my-2 justify-content-center text-center text-lg-none text-black-50"><div class="row mx-0 mr-lg-auto justify-content-center"><div class="col-auto px-1 copyright-legal"> Copyright&nbsp;2023</div><div class="col-auto px-0 copyright-by">by Eclipse Foundation</div></div></div></div><div class=col-md><div class="row mx-0 my-2 justify-content-center"><ul class="nav ml-lg-auto"><li class=nav-item><a class="nav-link py-0" href=https://projects.eclipse.org/projects/ecd.emfcloud>About</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/privacy.php>Privacy Policy</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/copyright.php>Copyright</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/>Legal</a></li></ul></div></div></div></div></footer><div id=react></div><script async defer src=/emfcloud/scripts/syna-main.min.68ae1ae47948304c9c224cfc1a97ffe16c57514bc587dd6140dcb82389a8d299.js></script><script async defer src=/emfcloud/scripts/syna-content.min.bf537eb5ace369e45e8b4ed41b8d235a65db92236a400ed5659f7a3c41d0f221.js></script><script async defer src=/emfcloud/scripts/syna-collapse.min.1f6ca6206008af133f158e2b7b650b4156b8fc33189c5a6142db3bb43c7ad8e7.js></script></body></html>