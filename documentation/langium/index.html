<!doctype html><html lang=en-us><head><meta name=theme content="Syna"><meta name=theme-version content="v0.17.2"><meta name=theme-url content="https://syna.okkur.org"><meta name=theme-description content="Highly customizable open source theme for Hugo based static websites"><meta name=theme-author content="Okkur Labs"><meta name=theme-author-url content="https://about.okkur.org"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=google content="notranslate"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=description content="To extend the Model Hub with your specific language, you need to provide a ModelServiceContribution. A model service contribution can provide a dedicated Model Service API and extend the persistence and validation capabilities of the Model Hub.
One of the core principles in our Model Hub architecture is re-use and we therefore aim to re-use as much of the language infrastructure and support that Langium generates for us. This is reflected in several design decisions:"><meta property="og:title" content="Langium Integration"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://www.eclipse.dev/emfcloud/documentation/langium/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Langium Integration &amp;middot; EMF Cloud"><meta name=twitter:description content="To extend the Model Hub with your specific language, you need to provide a ModelServiceContribution. A model service contribution can provide a dedicated Model Service API and extend the persistence and validation capabilities of the Model Hub.
One of the core principles in our Model Hub architecture is re-use and we therefore aim to re-use as much of the language infrastructure and support that Langium generates for us. This is reflected in several design decisions:"><meta name=twitter:url content="https://www.eclipse.dev/emfcloud/documentation/langium/"><meta property="og:image" content><meta name=twitter:image content><meta name=author content="Eclipse Foundation"><meta name=generator content="Hugo 0.78.1"><title>Langium Integration &#183; EMF Cloud</title><style>.mx-0{margin-left:0!important;margin-right:0!important}@-ms-viewport{width: device-width; }html{box-sizing:border-box;-ms-overflow-style:scrollbar}*,*::before,*::after{box-sizing:inherit}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;max-width:540px;max-width:720px;max-width:960px;max-width:1140px}.container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.no-gutters{margin-right:0;margin-left:0}.no-gutters>.col,.no-gutters>[class*=col-]{padding-right:0;padding-left:0}.col-1,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-10,.col-11,.col-12,.col,.col-auto{position:relative;width:100%;min-height:1px;padding-right:15px;padding-left:15px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-auto{flex:0 0 auto;width:auto;max-width:none}.col-1{flex:0 0 8.33333%;max-width:8.33333%}.col-2{flex:0 0 16.66667%;max-width:16.66667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.33333%;max-width:33.33333%}.col-5{flex:0 0 41.66667%;max-width:41.66667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.33333%;max-width:58.33333%}.col-8{flex:0 0 66.66667%;max-width:66.66667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.33333%;max-width:83.33333%}.col-11{flex:0 0 91.66667%;max-width:91.66667%}.col-12{flex:0 0 100%;max-width:100%}.order-first{order:-1}.order-last{order:13}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}.offset-1{margin-left:8.33333%}.offset-2{margin-left:16.66667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333%}.offset-5{margin-left:41.66667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333%}.offset-8{margin-left:66.66667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333%}.offset-11{margin-left:91.66667%}.d-none{display:none!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}@media print{.d-print-none{display:none!important}.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:flex!important}.d-print-inline-flex{display:inline-flex!important}}.flex-row{flex-direction:row!important}.flex-column{flex-direction:column!important}.flex-row-reverse{flex-direction:row-reverse!important}.flex-column-reverse{flex-direction:column-reverse!important}.flex-wrap{flex-wrap:wrap!important}.flex-nowrap{flex-wrap:nowrap!important}.flex-wrap-reverse{flex-wrap:wrap-reverse!important}.flex-fill{flex:1 1 auto!important}.flex-grow-0{flex-grow:0!important}.flex-grow-1{flex-grow:1!important}.flex-shrink-0{flex-shrink:0!important}.flex-shrink-1{flex-shrink:1!important}.justify-content-start{justify-content:flex-start!important}.justify-content-end{justify-content:flex-end!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}.justify-content-around{justify-content:space-around!important}.align-items-start{align-items:flex-start!important}.align-items-end{align-items:flex-end!important}.align-items-center{align-items:center!important}.align-items-baseline{align-items:baseline!important}.align-items-stretch{align-items:stretch!important}.align-content-start{align-content:flex-start!important}.align-content-end{align-content:flex-end!important}.align-content-center{align-content:center!important}.align-content-between{align-content:space-between!important}.align-content-around{align-content:space-around!important}.align-content-stretch{align-content:stretch!important}.align-self-auto{align-self:auto!important}.align-self-start{align-self:flex-start!important}.align-self-end{align-self:flex-end!important}.align-self-center{align-self:center!important}.align-self-baseline{align-self:baseline!important}.align-self-stretch{align-self:stretch!important}</style><link href=/emfcloud/style.min.3ebbdeb85cb631a42d571aa14e34188cd928e4e5d2c714de80309f51001f3a94.css rel=stylesheet><link rel="shortcut icon" type=image/x-icon href=favicon.ico><link rel=icon sizes="16x16 32x32" type=image/x-icon href=/emfcloud/favicon.ico><link rel=icon href=/emfcloud/favicon.png><link rel=apple-touch-icon-precomposed href=/emfcloud/favicon.png><script>window.syna={};</script><script src=/emfcloud/scripts/syna-head.min.0757f18970a0a32d5acac5a2accc5fe82f787821866c545d9ed17ca765f291a3.js></script></head><body class=bg-secondary><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "2375e895e9be4dc1a3672df5c8b9d320"}'></script><nav class="overlay fragment navbar navbar-expand-lg py-2 scroll-spy bg-light navbar-light" id=nav role=navigation><div class=container><a class="navbar-brand py-0" href=/emfcloud/#><img src=/emfcloud/images/logo.png height=35 class="d-inline-block align-top" alt="EMF Cloud"></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse justify-content-end collapse show" id=navbarCollapse><ul class=navbar-nav><li class=nav-item><a href=/emfcloud class=nav-link>Home</a></li><li class=nav-item><a href=/emfcloud/support class=nav-link>Support</a></li><li class=nav-item><a href=/emfcloud/documentation class=nav-link>Documentation</a></li><li class=nav-item><a href=/emfcloud/contact class=nav-link>Contact</a></li><li class=nav-item><a href=https://github.com/eclipse-emfcloud/emfcloud class=nav-link>GitHub</a></li></ul></div></div></nav><div class="scroll-to-top bg-primary has-font-icon" title="Back to top"><i class="fas fa-angle-up"></i><span class=sr-only>Back to top</span></div><section id=content class="fragment content-fragment"><div class="container-fluid bg-light overlay"><div class="container py-5 overlay"><div class=row><div class="content-sidebar col-md-3 pb-4 px-md-0 order-0"><div class="sticky-top pt-3"><div class="content-sidebar-body col-12 px-0 text-left text-body"><section id=sidebar class=fragment><div class="container p-0"><div class="row mx-0 text-body"><article id=list-page-overview class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-overview .collapse" data-add-collapse="#list-page-overview .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/overview/>Overview</a></h5></div></div><div class=collapse></div></article><article id=list-page-gettingstarted class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-gettingstarted .collapse" data-add-collapse="#list-page-gettingstarted .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/gettingstarted/>Getting Started</a></h5></div></div><div class=collapse></div></article><article id=list-page-coffeeeditorng class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-coffeeeditorng .collapse" data-add-collapse="#list-page-coffeeeditorng .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/coffeeeditorng/>Coffee Editor NG</a></h5></div></div><div class=collapse></div></article><article id=list-page-modelhub class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-modelhub .collapse" data-add-collapse="#list-page-modelhub .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/>Model Hub</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/#interacting-with-models>Interacting with models</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/modelhub/#contributing-modeling-languages>Contributing modeling languages</a></li></ul></li></ul></nav></div></div></section></div></article><article id=list-page-modelinglanguage class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-modelinglanguage .collapse" data-add-collapse="#list-page-modelinglanguage .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/modelinglanguage/>Language Definition</a></h5></div></div><div class=collapse></div></article><article id=list-page-langium class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-langium .collapse" data-add-collapse="#list-page-langium .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0 active-page"><a href=https://www.eclipse.dev/emfcloud/documentation/langium/>Langium Integration</a></h5></div></div><div class="collapse show"><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/langium/#model-persistence>Model Persistence</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/langium/#model-validation>Model Validation</a></li></ul></nav></div></div></section></div></article><article id=list-page-editingdomain class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-editingdomain .collapse" data-add-collapse="#list-page-editingdomain .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/>Editing Domain</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#general-principles>General principles</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#model-service-implementation>Model Service implementation</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#command-stack-ids>Command Stack IDs</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/editingdomain/#model-hub-context>Model Hub Context</a></li></ul></nav></div></div></section></div></article><article id=list-page-treeeditor class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-treeeditor .collapse" data-add-collapse="#list-page-treeeditor .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/>Tree-based Editors</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/#overview>Overview</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/#integrating-modelhub>Integrating ModelHub</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/treeeditor/#coffee-editor-ng-example>Coffee Editor NG Example</a></li></ul></nav></div></div></section></div></article><article id=list-page-diagrameditor class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-diagrameditor .collapse" data-add-collapse="#list-page-diagrameditor .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/>Diagram Editors</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#introduction>Introduction</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#modelhub-integration>ModelHub Integration</a><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#sourcemodelstorage>SourceModelStorage</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#gmodelfactory>GModelFactory</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#model-operations>Model Operations</a></li></ul></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#coffee-editor-ng-example>Coffee Editor NG Example</a><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#workflowmodelstorage>WorkflowModelStorage</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#coffeegmodelfactory>CoffeeGModelFactory</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/diagrameditor/#model-operations-via-the-coffeemodelservice>Model Operations via the CoffeeModelService</a></li></ul></li></ul></nav></div></div></section></div></article><article id=list-page-emf class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-emf .collapse" data-add-collapse="#list-page-emf .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/emf/>EMF Support</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/emf/#emf-model-server>EMF Model Server</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/emf/#emf-coffee-editor>EMF Coffee Editor</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/emf/#getting-started>Getting Started</a></li></ul></nav></div></div></section></div></article><article id=list-page-additionals class="col-12 px-0 mb-2"><div class="col-12 pl-0 pb-1 text-body"><div data-toggle=collapse data-target="#list-page-additionals .collapse" data-add-collapse="#list-page-additionals .article-title" class="row align-items-center justify-content-between mx-0 article-title"><h5 class="col px-0 m-0"><a href=https://www.eclipse.dev/emfcloud/documentation/additionals/>More Articles & Videos</a></h5></div></div><div class=collapse><section id=toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/additionals/#articles>Articles</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/additionals/#videos>Videos</a></li></ul></nav></div></div></section></div></article></div></div></section></div></div></div><article class=col-md-9><div class="title-container row mx-0"><div class="title col px-0 text-center text-body"><h2>Langium Integration</h2></div></div><div class="content-body col-12 content px-0 text-body"><section id=content-toc class=fragment><div class="container p-0"><div class=toc><nav id=TableOfContents><ul><li><a href=https://www.eclipse.dev/emfcloud/documentation/langium/#model-persistence>Model Persistence</a></li><li><a href=https://www.eclipse.dev/emfcloud/documentation/langium/#model-validation>Model Validation</a></li></ul></nav></div></div></section><p>To extend the Model Hub with your specific language, you need to provide a <code>ModelServiceContribution</code>.
A model service contribution can provide a dedicated Model Service API and extend the persistence and validation capabilities of the Model Hub.</p><p>One of the core principles in our Model Hub architecture is re-use and we therefore aim to re-use as much of the language infrastructure and support that Langium generates for us.
This is reflected in several design decisions:</p><ul><li><p>Since the language server that contains the modules with all the languages already starts in a dedicated process, we will start our own Model Hub server in the same process to ease access.</p></li><li><p>We are re-using the dependency injection framework from Langium to bind our own Model Hub-specific services, such as the core model hub implementation, the model manager that holds the model storage, the overall command stack and the model subscriptions or the validation service that ensures that all custom validations are run on each model.</p></li></ul><p>The bridge that connects the Model Hub world with the Langium world is our generic <em>EMF Cloud Model Hub Langium integration library</em>.
That library has two main components:</p><ol><li><p>The Abstract Syntax Tree (AST) server that serves as a facade to access and update semantic models from the Langium language server as a non-LSP client.
It provides a simple open-request-update-save/close lifecycle for documents and their semantic model.</p></li><li><p>A converter between the Langium-based AST model and the client language model.</p></li></ol><p>The biggest difference between those two models is that the client language model needs to be a serializable JSON model as we update the model using JSON patches and intend to send the model to clients which might run in a differenct process.
Please note that this JSON model is indepdendent from the serialization format that you define in your grammar from which the AST is derived.
This core work of the conversion is the resolution of cycles and the proper representation of cross references so that when we get a language model back from the client we can restore a full Langium-based AST model again, i.e., to have a full bi-directional transformation when it comes to the semantic model.</p><p>Using the generic AST server and the AST-language model converter we can easily implement a language-specific, typed <code>ModelServiceContribution</code> that the Model Hub can pick up and use as all we need to do is to connect our Langium services with the respective Model Hub services.
Any additional functionality that we want to expose for our language can be exported as Model Service API in the contribution and re-used in the model hub or even a dedicated server.</p><h2 id=model-persistence>Model Persistence</h2><p>A model persistence contribution provides language-specific methods to load and store models from and to a persistent storage.
Based on the services generated by Langium, we can query the document storage from Langium and using the generic converter ensure that we return a serializable model for the Model Hub.
Similarly, we can re-use the generated Langium infrastructure to store the model by converting the language model back to an AST model.
Furthermore, we need to ensure that anytime a model is updated on the Langium side we properly update the model on the Model Hub side.
We achieve that by installing a listener on the Langium side and using the Model Manager from the Model Hub to execute a PATCH command that updates the model in the Model Hub.</p><p>For the Coffee Model, the persistence contribution may look something like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CoffeePersistence</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ModelPersistenceContribution</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>string</span>, <span style=color:#a6e22e>CoffeeModelRoot</span><span style=color:#f92672>&gt;</span> {
  <span style=color:#a6e22e>modelHub</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ModelHub</span>;
  <span style=color:#a6e22e>modelManager</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ModelManager</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>string</span><span style=color:#f92672>&gt;</span>;

  <span style=color:#a6e22e>constructor</span>(<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>modelServer</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>CoffeeModelServer</span>) {
  }

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>canHandle</span>(<span style=color:#a6e22e>modelId</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>)<span style=color:#f92672>:</span> Promise<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>boolean</span><span style=color:#f92672>&gt;</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>modelId</span>.<span style=color:#a6e22e>endsWith</span>(<span style=color:#e6db74>&#39;.coffee&#39;</span>);
  }

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>loadModel</span>(<span style=color:#a6e22e>modelId</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>)<span style=color:#f92672>:</span> Promise<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>CoffeeModelRoot</span><span style=color:#f92672>&gt;</span> {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>model</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelServer</span>.<span style=color:#a6e22e>getModel</span>(<span style=color:#a6e22e>modelId</span>);
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>model</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>undefined</span>) {
      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#39;Failed to load model: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>modelId</span>);
    }

    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelServer</span>.<span style=color:#a6e22e>onUpdate</span>(<span style=color:#a6e22e>modelId</span>, <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>newModel</span> =&gt; {
      <span style=color:#66d9ef>try</span> {
        <span style=color:#75715e>// update model hub model
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentModel</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelHub</span>.<span style=color:#a6e22e>getModel</span>(<span style=color:#a6e22e>modelId</span>);
        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>diff</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>compare</span>(<span style=color:#a6e22e>currentModel</span>, <span style=color:#a6e22e>newModel</span>);
        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>diff</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
          <span style=color:#66d9ef>return</span>;
        }
        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>commandStack</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelManager</span>.<span style=color:#a6e22e>getCommandStack</span>(<span style=color:#a6e22e>modelId</span>);
        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>updateCommand</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PatchCommand</span>(<span style=color:#e6db74>&#39;Update Derived Values&#39;</span>, <span style=color:#a6e22e>currentModel</span>, <span style=color:#a6e22e>diff</span>);
        <span style=color:#a6e22e>commandStack</span>.<span style=color:#a6e22e>execute</span>(<span style=color:#a6e22e>updateCommand</span>);
      } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Failed to synchronize model from CoffeeLanguageService&#39;</span>, <span style=color:#a6e22e>error</span>);
      }
    });
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>model</span>;
  }

  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>saveModel</span>(<span style=color:#a6e22e>modelId</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>, <span style=color:#a6e22e>model</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>CoffeeModelRoot</span>)<span style=color:#f92672>:</span> Promise<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>boolean</span><span style=color:#f92672>&gt;</span> {
    <span style=color:#66d9ef>try</span> {
      <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modelServer</span>.<span style=color:#a6e22e>save</span>(<span style=color:#a6e22e>modelId</span>, <span style=color:#a6e22e>model</span>);
    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Failed to save model&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>modelId</span>, <span style=color:#a6e22e>error</span>);
      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
    }
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
  }  
}
</code></pre></div><h2 id=model-validation>Model Validation</h2><p>A model validation contribution can provide a set of validators that work on the semantic model of the Model Hub.
As a result, a validator can return a hierarchical diagnotic object that captures the infos, warnings, and errors of a particular part in the model.
Using the generic transformations between the Langium and Model Hub space, the main work in this contribution is the translation from Langium&rsquo;s <code>DiagnosticInfo</code> to the Model Hub&rsquo;s more generic <code>Diagnostic</code>.
Providing this translation as part of the generic <em>EMF Cloud Model Hub Langium integration library</em> is on the roadmap but can be also extracted from any public example.</p></div></article></div></div></div></section><section id=footer class=fragment><div class="container-fluid bg-light"><div class="container py-5"><div class=row><div class="col-md m-2 text-body"><h4></h4><a href=#><img src=/emfcloud/images/logo.png class="img-fluid w-50" alt="EMF Cloud"></a><div class="row justify-content-left ml-0"><span class="fa-stack fa-2x mt-3 mr-1" title=twitter><a href=https://twitter.com/emfcloud class=ignore-color-change><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-twitter fa-stack-1x fa-fw text-light"></i><span class=sr-only>twitter</span></a></span>
<span class="fa-stack fa-2x mt-3 mr-1" title=github><a href=https://github.com/eclipse-emfcloud/emfcloud class=ignore-color-change><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-github fa-stack-1x fa-fw text-light"></i><span class=sr-only>github</span></a></span>
<span class="fa-stack fa-2x mt-3 mr-1" title=github-discussions><a href=https://github.com/eclipse-emfcloud/emfcloud/discussions class=ignore-color-change><i class="fas fa-circle fa-stack-2x"></i><i class="far fa-comments fa-stack-1x fa-fw text-light"></i><span class=sr-only>github-discussions</span></a></span></div></div><div class="col-md m-2 text-body"><h4>Related Projects</h4><ul class="nav flex-column"><li class=nav-item><a class="nav-link p-0 display-5" href=https://eclipse.dev/glsp>Eclipse GLSP</a></li><li class=nav-item><a class="nav-link p-0 display-5" href=https://jsonforms.io>JSON Forms</a></li><li class=nav-item><a class="nav-link p-0 display-5" href=https://eclipsesource.com/technology/eclipse-theia>Eclipse Theia IDE</a></li><li class=nav-item><a class="nav-link p-0 display-5" href=https://eclipse.dev/che>Eclipse Che</a></li></ul></div><div class="col-md m-2 text-body"><div><h4 id=emf-cloud>EMF Cloud</h4><p>EMF Cloud is a project hosted at the <a href=https://eclipse.org>Eclipse Foundation</a>, lead by <a href=https://projects.eclipse.org/projects/ecd.emfcloud/who>Eugen, Philip and Maximilian</a>, organized within the <a href=https://projects.eclipse.org/projects/ecd>Eclipse Cloud Development</a> project.</p><p>Gefördert durch: <img src=/emfcloud/images/BMBF_Logo.svg alt="BMBG Logo"></p></div></div></div></div></div></section><footer class="overlay fragment container-fluid bg-secondary" id=copyright><div class=container><div class="row py-3"><div class=col-md><div class="row mx-0 my-2 justify-content-center text-center text-lg-none text-black-50"><div class="row mx-0 mr-lg-auto justify-content-center"><div class="col-auto px-1 copyright-legal">© Copyright&nbsp;2023</div><div class="col-auto px-0 copyright-by">by Eclipse Foundation</div></div></div></div><div class=col-md><div class="row mx-0 my-2 justify-content-center"><ul class="nav ml-lg-auto"><li class=nav-item><a class="nav-link py-0" href=https://projects.eclipse.org/projects/ecd.emfcloud>About</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/privacy.php>Privacy Policy</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/copyright.php>Copyright</a></li><li class=nav-item><a class="nav-link py-0" href=https://www.eclipse.org/legal/>Legal</a></li></ul></div></div></div></div></footer><div id=react></div><script async defer src=/emfcloud/scripts/syna-main.min.68ae1ae47948304c9c224cfc1a97ffe16c57514bc587dd6140dcb82389a8d299.js></script><script async defer src=/emfcloud/scripts/syna-content.min.bf537eb5ace369e45e8b4ed41b8d235a65db92236a400ed5659f7a3c41d0f221.js></script><script async defer src=/emfcloud/scripts/syna-collapse.min.1f6ca6206008af133f158e2b7b650b4156b8fc33189c5a6142db3bb43c7ad8e7.js></script></body></html>